# 平衡小车零基础使用说明

这份说明面向**完全零基础**的同学，带你从安装工具到联网控制平衡小车。请按顺序完成，第一次操作建议一步不落。

## 0. 准备硬件与网络
- 一台带 Type‑C 数据线的 ESP32 平衡车主控板（供电稳定，最好接电脑 USB 口或可靠电源适配器）。
- 一条可传输数据的 USB 线（仅充电线无法烧录）。
- 一张 2.4GHz Wi‑Fi 热点（路由器或手机热点），知道它的名称和密码。
- 一台电脑（Windows/macOS/Linux 均可）和浏览器（Chrome/Edge/Firefox 等）。

## 1. 安装 VS Code 与 PlatformIO
1. 前往 https://code.visualstudio.com/ 下载并安装 VS Code。安装完成后启动 VS Code。
2. 在左侧工具栏点击“扩展”图标（方块拼图），在搜索框输入 `PlatformIO IDE`，点击“安装”。
3. 安装结束后 VS Code 会提示重载或自动重启，按提示操作。首次启动 PlatformIO 会自动下载编译/烧录工具，等待它完成。

## 2. 下载并打开项目
- 方法 A：如果会用 Git，在终端执行 `git clone <项目地址>`，然后在 VS Code 选择“文件”→“打开文件夹”，选中仓库目录。
- 方法 B：在项目页面点 “Code”→“Download ZIP”，解压后用 VS Code 打开解压出的文件夹。

## 3. 配置 Wi‑Fi 信息
1. 在 VS Code 左侧资源管理器找到 `include/my_config.h`。
2. 找到下列两行，将双引号内改成你自己的热点名称和密码（仅支持 2.4GHz）：
   ```cpp
   #define SSID "你的WiFi名称"
   #define PASSWORD "你的WiFi密码"
   ```
3. 保存文件（Ctrl/Cmd+S）。

## 4. 连接开发板
1. 用数据线把平衡车主控板连接到电脑。
2. 如果系统提示需要驱动，按提示安装（常见为 CP210x/CH34x 驱动）。安装后重新插拔一次。
3. 记住电脑识别到的串口：Windows 通常是 `COM数字`，macOS/Linux 通常是 `/dev/cu.usb*` 或 `/dev/ttyUSB*`。

## 5. 编译与烧录固件
1. 打开 VS Code 左侧的外星人图标（PlatformIO）。
2. 先点击“Project Tasks”→`env:4d_systems_esp32s3_gen4_r8n16`→“General”→“Build”运行一次，确认代码能正常编译。
3. 编译通过后，点击同一位置的“Upload”开始烧录。若弹窗让你选端口，选择上一步看到的串口。
4. 烧录成功后，状态栏会显示 “Success”。若失败，可尝试：
   - 更换数据线或 USB 口。
   - 板子有 BOOT/EN 按键时，按住 BOOT 点击 EN/RESET，再松开 BOOT 后重试 Upload。

## 6. 打开串口查看 IP
1. 在 PlatformIO 的同一任务列表中点击 “Monitor” 打开串口监视器。
2. 左下角确认波特率为 **115200**（主程序在 `Serial.begin(115200);`）。
3. 串口窗口会先打印 `Connecting to WiFi...`，成功后出现：
   ```
   Connected to WiFi
   IP Address: 192.168.x.x
   ```
   记下这行 IP 地址。

## 7. 浏览器控制小车
1. 确保电脑与小车连接的是**同一个热点**（与步骤 3 设置的 Wi‑Fi 一致）。
2. 在浏览器地址栏输入刚才记下的 `http://<IP地址>`，打开网页控制界面。
3. 页面加载后点击“运行/开始”按钮，小车会进入自平衡并可移动。

## 8. 车组模式（编队）
1. 让每辆小车都先进入网页端并切换到“车组模式”/“编队模式”。
2. 在其中一辆小车的网页端输入其它小车的 IP 地址，保存或添加后即可组成车队。
3. 确保所有小车都连在同一热点，保持信号良好。

## 9. 常见问题排查
- 无法连接 Wi‑Fi：确认热点是 2.4GHz；SSID/密码无中文空格/输错大小写；热点允许新设备加入。
- 烧录失败：换数据线/USB 口；检查是否选对串口；必要时手动进下载模式（按 BOOT+RESET）。
- 网页打不开：电脑和小车必须在同一网络；确认串口打印的 IP 是否变化；路由器有时会更换 IP，重新上电查看最新 IP。
- 小车不动或异常：先停用“运行”，重新上电；保持场地平整，避免在高低不平处调试。
